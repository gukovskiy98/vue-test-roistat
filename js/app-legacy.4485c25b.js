(function(){"use strict";var e={4216:function(e,t,s){s.r(t),s.d(t,{default:function(){return _}});var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"users-list__wrapper"},[e.users.length?[e.showHeader?s("div",{staticClass:"users-list__header"},[s("span",{staticClass:"users-list__header-left"},[e._v("Имя")]),s("span",{staticClass:"users-list__header-right"},[e._v("Телефон")])]):e._e(),e._l(e.users,(function(e){return s("UserItem",{key:e.id,attrs:{user:e}})}))]:s("span",{staticClass:"users-list__empty-plug"},[e._v("Нет элементов для отображения")])],2)},r=[],a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-item__wrapper",on:{click:function(t){t.stopPropagation(),e.isExpanded=!e.isExpanded}}},[e.user.children&&e.user.children.length?s("span",{staticClass:"user-item__expand"},[e._v(" "+e._s(e.isExpanded?"-":"+")+" ")]):e._e(),s("span",{staticClass:"user-item__left"},[e._v(e._s(e.user.name))]),s("span",{staticClass:"user-item__right"},[e._v(e._s(e.user.phone))]),e.user.children&&e.user.children.length?s("UsersList",{directives:[{name:"show",rawName:"v-show",value:e.isExpanded,expression:"isExpanded"}],attrs:{"show-header":!1,users:e.user.children}}):e._e()],1)},i=[],o=(s(1539),s(8783),s(3948),{props:{user:{default:function(){return{}},type:Object},openExpanded:{default:!1,type:Boolean}},data:function(){return{isExpanded:this.openExpanded}},components:{UsersList:function(){return Promise.resolve().then(s.bind(s,4216))}}}),u=o,l=s(1001),c=(0,l.Z)(u,a,i,!1,null,"370f4acc",null),d=c.exports,p={props:{users:{default:function(){return[]},type:Array},showHeader:{default:!0,type:Boolean}},data:function(){return{isExpanded:!0}},components:{UserItem:d}},f=p,m=(0,l.Z)(f,n,r,!1,null,"ef34b46c",null),_=m.exports},9810:function(e,t,s){s(6992),s(8674),s(9601),s(7727);var n=s(8935),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("transition",{attrs:{name:"fade"}},[s("keep-alive",[e.isModalOpened?s("NewUserModal"):e._e()],1)],1),s("button",{staticClass:"add-new-btn",attrs:{type:"button"},on:{click:function(t){return e.changeModalVisibility(!0)}}},[e._v("Добавить")]),s("UsersList",{staticClass:"root-users-list",attrs:{users:e.allUsersTree}})],1)},a=[],i=s(3019),o=(s(8862),s(4665)),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal__overlay",on:{click:function(t){return e.changeModalVisibility(!1)}}},[s("form",{staticClass:"modal__body form",on:{click:function(e){e.stopPropagation()},submit:function(t){return t.preventDefault(),e.onFormSubmit.apply(null,arguments)}}},[s("h2",{staticClass:"form__title"},[e._v("Добавление пользователя")]),s("label",{staticClass:"form__label"},[s("span",{staticClass:"form__label-value"},[e._v("Имя")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],staticClass:"form__input",attrs:{type:"text",required:""},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value)}}})]),s("label",{staticClass:"form__label"},[s("span",{staticClass:"form__label-value"},[e._v("Телефон")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userPhone,expression:"userPhone"}],staticClass:"form__input",attrs:{type:"tel",required:""},domProps:{value:e.userPhone},on:{input:function(t){t.target.composing||(e.userPhone=t.target.value)}}})]),e.allUsersList.length?s("label",{staticClass:"form__label"},[s("span",{staticClass:"form__label-value"},[e._v("Начальник")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.parentId,expression:"parentId"}],staticClass:"form__select",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.parentId=t.target.multiple?s:s[0]}}},[s("option",{attrs:{selected:"",value:""}},[e._v("Без начальника")]),e._l(e.allUsersList,(function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)]):e._e(),s("button",{staticClass:"form__submit",attrs:{type:"submit"}},[e._v("Сохранить")]),s("button",{staticClass:"form__close",attrs:{type:"button"},on:{click:function(t){return e.changeModalVisibility(!1)}}})])])},l=[],c=s(9409),d=s.n(c),p={data:function(){return{userName:"",userPhone:"",parentId:""}},computed:(0,i.Z)({},(0,o.Se)(["allUsersList"])),methods:(0,i.Z)((0,i.Z)({},(0,o.OI)(["changeModalVisibility","addNewUser"])),{},{onFormSubmit:function(){this.addNewUser({name:this.userName,phone:this.userPhone,id:d()(),parentId:this.parentId}),this.userName="",this.userPhone="",this.parentId="",this.changeModalVisibility(!1)}})},f=p,m=s(1001),_=(0,m.Z)(f,u,l,!1,null,"6edd038c",null),v=_.exports,h=s(4216),g={name:"App",computed:(0,i.Z)({},(0,o.Se)(["allUsersList","allUsersTree","isModalOpened"])),methods:(0,i.Z)((0,i.Z)({},(0,o.nv)(["getUsersFromStorage","setUsersToStorage"])),(0,o.OI)(["changeModalVisibility"])),mounted:function(){var e=this;this.getUsersFromStorage(),window.addEventListener("beforeunload",(function(){return e.setUsersToStorage(JSON.stringify(e.allUsersList))}))},components:{NewUserModal:v,UsersList:h["default"]}},b=g,y=(0,m.Z)(b,r,a,!1,null,"08f0b194",null),w=y.exports;s(1539),s(4747);n.Z.use(o.ZP);var U=new o.ZP.Store({state:{users:[],isModalOpened:!1},getters:{allUsersList:function(e){return e.users},isModalOpened:function(e){return e.isModalOpened},allUsersTree:function(e){var t=[],s={},n=[];return e.users.forEach((function(e,n){s[e.id]=n,t.push(Object.assign({},e,{children:[]}))})),t.forEach((function(e){e.parentId?t[s[e.parentId]].children.push(e):n.push(e)})),n}},mutations:{updateUsers:function(e,t){e.users=t},changeModalVisibility:function(e,t){e.isModalOpened=t},addNewUser:function(e,t){e.users.push(t)}},actions:{getUsersFromStorage:function(e){var t=JSON.parse(window.localStorage.getItem("users"))||[];e.commit("updateUsers",t)},setUsersToStorage:function(e,t){window.localStorage.setItem("users",t)}}});n.Z.config.productionTip=!1,new n.Z({store:U,render:function(e){return e(w)}}).$mount("#app")}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,n,r,a){if(!n){var i=1/0;for(c=0;c<e.length;c++){n=e[c][0],r=e[c][1],a=e[c][2];for(var o=!0,u=0;u<n.length;u++)(!1&a||i>=a)&&Object.keys(s.O).every((function(e){return s.O[e](n[u])}))?n.splice(u--,1):(o=!1,a<i&&(i=a));if(o){e.splice(c--,1);var l=r();void 0!==l&&(t=l)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,r,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,a,i=n[0],o=n[1],u=n[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);if(u)var c=u(s)}for(t&&t(n);l<i.length;l++)a=i[l],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(c)},n=self["webpackChunkvue_test_roistat"]=self["webpackChunkvue_test_roistat"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(9810)}));n=s.O(n)})();
//# sourceMappingURL=app-legacy.4485c25b.js.map