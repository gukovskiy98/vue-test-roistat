(function(){"use strict";var e={4216:function(e,t,s){s.r(t),s.d(t,{default:function(){return _}});var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"users-list__wrapper"},[e.users.length?[e.showHeader?s("div",{staticClass:"users-list__header"},[s("span",{staticClass:"users-list__header-left"},[e._v("Имя")]),s("span",{staticClass:"users-list__header-right"},[e._v("Телефон")])]):e._e(),e._l(e.users,(function(e){return s("UserItem",{key:e.id,attrs:{user:e}})}))]:s("span",{staticClass:"users-list__empty-plug"},[e._v("Нет элементов для отображения")])],2)},n=[],a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-item__wrapper",on:{click:function(t){t.stopPropagation(),e.isExpanded=!e.isExpanded}}},[e.user.children&&e.user.children.length?s("span",{staticClass:"user-item__expand"},[e._v(" "+e._s(e.isExpanded?"-":"+")+" ")]):e._e(),s("span",{staticClass:"user-item__left"},[e._v(e._s(e.user.name))]),s("span",{staticClass:"user-item__right"},[e._v(e._s(e.user.phone))]),e.user.children&&e.user.children.length?s("UsersList",{directives:[{name:"show",rawName:"v-show",value:e.isExpanded,expression:"isExpanded"}],attrs:{"show-header":!1,users:e.user.children}}):e._e()],1)},i=[],o={props:{user:{default(){return{}},type:Object},openExpanded:{default:!1,type:Boolean}},data(){return{isExpanded:this.openExpanded}},components:{UsersList:()=>Promise.resolve().then(s.bind(s,4216))}},l=o,u=s(1001),c=(0,u.Z)(l,a,i,!1,null,"370f4acc",null),d=c.exports,p={props:{users:{default(){return[]},type:Array},showHeader:{default:!0,type:Boolean}},data(){return{isExpanded:!0}},components:{UserItem:d}},f=p,m=(0,u.Z)(f,r,n,!1,null,"ef34b46c",null),_=m.exports},9810:function(e,t,s){var r=s(8935),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("transition",{attrs:{name:"fade"}},[s("keep-alive",[e.isModalOpened?s("NewUserModal"):e._e()],1)],1),s("button",{staticClass:"add-new-btn",attrs:{type:"button"},on:{click:function(t){return e.changeModalVisibility(!0)}}},[e._v("Добавить")]),s("UsersList",{staticClass:"root-users-list",attrs:{users:e.allUsersTree}})],1)},a=[],i=s(4665),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal__overlay",on:{click:function(t){return e.changeModalVisibility(!1)}}},[s("form",{staticClass:"modal__body form",on:{click:function(e){e.stopPropagation()},submit:function(t){return t.preventDefault(),e.onFormSubmit.apply(null,arguments)}}},[s("h2",{staticClass:"form__title"},[e._v("Добавление пользователя")]),s("label",{staticClass:"form__label"},[s("span",{staticClass:"form__label-value"},[e._v("Имя")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],staticClass:"form__input",attrs:{type:"text",required:""},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value)}}})]),s("label",{staticClass:"form__label"},[s("span",{staticClass:"form__label-value"},[e._v("Телефон")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userPhone,expression:"userPhone"}],staticClass:"form__input",attrs:{type:"tel",required:""},domProps:{value:e.userPhone},on:{input:function(t){t.target.composing||(e.userPhone=t.target.value)}}})]),e.allUsersList.length?s("label",{staticClass:"form__label"},[s("span",{staticClass:"form__label-value"},[e._v("Начальник")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.parentId,expression:"parentId"}],staticClass:"form__select",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.parentId=t.target.multiple?s:s[0]}}},[s("option",{attrs:{selected:"",value:""}},[e._v("Без начальника")]),e._l(e.allUsersList,(function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)]):e._e(),s("button",{staticClass:"form__submit",attrs:{type:"submit"}},[e._v("Сохранить")]),s("button",{staticClass:"form__close",attrs:{type:"button"},on:{click:function(t){return e.changeModalVisibility(!1)}}})])])},l=[],u=s(9409),c=s.n(u),d={data:function(){return{userName:"",userPhone:"",parentId:""}},computed:{...(0,i.Se)(["allUsersList"])},methods:{...(0,i.OI)(["changeModalVisibility","addNewUser"]),onFormSubmit(){this.addNewUser({name:this.userName,phone:this.userPhone,id:c()(),parentId:this.parentId}),this.userName="",this.userPhone="",this.parentId="",this.changeModalVisibility(!1)}}},p=d,f=s(1001),m=(0,f.Z)(p,o,l,!1,null,"6edd038c",null),_=m.exports,v=s(4216),h={name:"App",computed:{...(0,i.Se)(["allUsersList","allUsersTree","isModalOpened"])},methods:{...(0,i.nv)(["getUsersFromStorage","setUsersToStorage"]),...(0,i.OI)(["changeModalVisibility"])},mounted(){this.getUsersFromStorage(),window.addEventListener("beforeunload",(()=>this.setUsersToStorage(JSON.stringify(this.allUsersList))))},components:{NewUserModal:_,UsersList:v["default"]}},g=h,b=(0,f.Z)(g,n,a,!1,null,"08f0b194",null),y=b.exports;r.Z.use(i.ZP);var w=new i.ZP.Store({state:{users:[],isModalOpened:!1},getters:{allUsersList(e){return e.users},isModalOpened(e){return e.isModalOpened},allUsersTree(e){const t=[],s={},r=[];return e.users.forEach(((e,r)=>{s[e.id]=r,t.push(Object.assign({},e,{children:[]}))})),t.forEach((e=>{e.parentId?t[s[e.parentId]].children.push(e):r.push(e)})),r}},mutations:{updateUsers(e,t){e.users=t},changeModalVisibility(e,t){e.isModalOpened=t},addNewUser(e,t){e.users.push(t)}},actions:{getUsersFromStorage(e){const t=JSON.parse(window.localStorage.getItem("users"))||[];e.commit("updateUsers",t)},setUsersToStorage(e,t){window.localStorage.setItem("users",t)}}});r.Z.config.productionTip=!1,new r.Z({store:w,render:e=>e(y)}).$mount("#app")}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,r,n,a){if(!r){var i=1/0;for(c=0;c<e.length;c++){r=e[c][0],n=e[c][1],a=e[c][2];for(var o=!0,l=0;l<r.length;l++)(!1&a||i>=a)&&Object.keys(s.O).every((function(e){return s.O[e](r[l])}))?r.splice(l--,1):(o=!1,a<i&&(i=a));if(o){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,n,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,a,i=r[0],o=r[1],l=r[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(l)var c=l(s)}for(t&&t(r);u<i.length;u++)a=i[u],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(c)},r=self["webpackChunkvue_test_roistat"]=self["webpackChunkvue_test_roistat"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(9810)}));r=s.O(r)})();
//# sourceMappingURL=app.89f54130.js.map