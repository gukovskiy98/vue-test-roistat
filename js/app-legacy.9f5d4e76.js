(function(){"use strict";var e={2633:function(e,t,s){s.r(t),s.d(t,{default:function(){return v}});var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"users-list__wrapper"},[e.users.length?[s("div",{staticClass:"users-list__header"},[s("span",{staticClass:"users-list__header-left",on:{click:function(t){return t.stopPropagation(),e.toggleSort("name")}}},[e._v("Имя")]),s("span",{staticClass:"users-list__header-right",on:{click:function(t){return t.stopPropagation(),e.toggleSort("phone")}}},[e._v("Телефон")])]),e._l(e.sortedUsers,(function(e){return s("UserItem",{key:e.id,attrs:{user:e}})}))]:s("span",{staticClass:"users-list__empty-plug"},[e._v("Нет элементов для отображения")])],2)},n=[],o=s(4479),i=(s(2707),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-item__wrapper",on:{click:function(t){t.stopPropagation(),e.isExpanded=!e.isExpanded}}},[e.user.children&&e.user.children.length?s("span",{staticClass:"user-item__expand"},[e._v(" "+e._s(e.isExpanded?"-":"+")+" ")]):e._e(),s("span",{staticClass:"user-item__left"},[e._v(e._s(e.user.name))]),s("span",{staticClass:"user-item__right"},[e._v(e._s(e.user.phone))]),e.user.children&&e.user.children.length?s("UsersList",{directives:[{name:"show",rawName:"v-show",value:e.isExpanded,expression:"isExpanded"}],attrs:{users:e.user.children}}):e._e()],1)}),a=[],u=(s(1539),s(8783),s(3948),{props:{user:{default:function(){return{}},type:Object},openExpanded:{default:!1,type:Boolean}},data:function(){return{isExpanded:this.openExpanded}},components:{UsersList:function(){return Promise.resolve().then(s.bind(s,2633))}}}),l=u,c=s(1001),d=(0,c.Z)(l,i,a,!1,null,"7442cd49",null),p=d.exports,f={props:{users:{default:function(){return[]},type:Array}},computed:{sortedUsers:function(){var e=this;return(0,o.Z)(this.users).sort((function(t,s){return console.log(e,t[e.sort_field],s[e.sort_field],s[e.sort_field]>t[e.sort_field]),"asc"===e.sort_direction?t[e.sort_field].localeCompare(s[e.sort_field]):s[e.sort_field].localeCompare(t[e.sort_field])}))}},data:function(){return{isExpanded:!1,sort_direction:"asc",sort_field:"name"}},methods:{toggleSort:function(e){this.sort_field=e,this.sort_direction="asc"===this.sort_direction?"desc":"asc"}},components:{UserItem:p}},_=f,m=(0,c.Z)(_,r,n,!1,null,"94ead9f4",null),v=m.exports},4931:function(e,t,s){s(6992),s(8674),s(9601),s(7727);var r=s(8935),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("transition",{attrs:{name:"fade"}},[s("keep-alive",[e.isModalOpened?s("NewUserModal"):e._e()],1)],1),s("button",{staticClass:"add-new-btn",attrs:{type:"button"},on:{click:function(t){return e.changeModalVisibility(!0)}}},[e._v("Добавить")]),s("UsersList",{staticClass:"root-users-list",attrs:{users:e.allUsersTree}})],1)},o=[],i=s(3019),a=(s(8862),s(4665)),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal__overlay",on:{click:function(t){return e.changeModalVisibility(!1)}}},[s("form",{staticClass:"modal__body form",on:{click:function(e){e.stopPropagation()},submit:function(t){return t.preventDefault(),e.onFormSubmit.apply(null,arguments)}}},[s("h2",{staticClass:"form__title"},[e._v("Добавление пользователя")]),s("label",{staticClass:"form__label"},[s("span",{staticClass:"form__label-value"},[e._v("Имя")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],staticClass:"form__input",attrs:{type:"text",required:""},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value)}}})]),s("label",{staticClass:"form__label"},[s("span",{staticClass:"form__label-value"},[e._v("Телефон")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userPhone,expression:"userPhone"}],staticClass:"form__input",attrs:{type:"tel",required:""},domProps:{value:e.userPhone},on:{input:function(t){t.target.composing||(e.userPhone=t.target.value)}}})]),e.allUsersList.length?s("label",{staticClass:"form__label"},[s("span",{staticClass:"form__label-value"},[e._v("Начальник")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.parentId,expression:"parentId"}],staticClass:"form__select",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.parentId=t.target.multiple?s:s[0]}}},[s("option",{attrs:{selected:"",value:""}},[e._v("Без начальника")]),e._l(e.allUsersList,(function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)]):e._e(),s("button",{staticClass:"form__submit",attrs:{type:"submit"}},[e._v("Сохранить")]),s("button",{staticClass:"form__close",attrs:{type:"button"},on:{click:function(t){return t.stopPropagation(),e.changeModalVisibility(!1)}}})])])},l=[],c=s(9409),d=s.n(c),p={data:function(){return{userName:"",userPhone:"",parentId:""}},computed:(0,i.Z)({},(0,a.Se)(["allUsersList"])),methods:(0,i.Z)((0,i.Z)({},(0,a.OI)(["changeModalVisibility","addNewUser"])),{},{onFormSubmit:function(){this.addNewUser({name:this.userName,phone:this.userPhone,id:d()(),parentId:this.parentId}),this.userName="",this.userPhone="",this.parentId="",this.changeModalVisibility(!1)}})},f=p,_=s(1001),m=(0,_.Z)(f,u,l,!1,null,"0aa33f98",null),v=m.exports,h=s(2633),g={name:"App",computed:(0,i.Z)({},(0,a.Se)(["allUsersList","allUsersTree","isModalOpened"])),methods:(0,i.Z)((0,i.Z)({},(0,a.nv)(["getUsersFromStorage","setUsersToStorage"])),(0,a.OI)(["changeModalVisibility"])),mounted:function(){var e=this;this.getUsersFromStorage(),window.addEventListener("beforeunload",(function(){return e.setUsersToStorage(JSON.stringify(e.allUsersList))}))},components:{NewUserModal:v,UsersList:h["default"]}},b=g,y=(0,_.Z)(b,n,o,!1,null,"08f0b194",null),w=y.exports;s(1539),s(4747);r.Z.use(a.ZP);var U=new a.ZP.Store({state:{users:[],isModalOpened:!1},getters:{allUsersList:function(e){return e.users},isModalOpened:function(e){return e.isModalOpened},allUsersTree:function(e){var t=[],s={},r=[];return e.users.forEach((function(e,r){s[e.id]=r,t.push(Object.assign({},e,{children:[]}))})),t.forEach((function(e){e.parentId?t[s[e.parentId]].children.push(e):r.push(e)})),r}},mutations:{updateUsers:function(e,t){e.users=t},changeModalVisibility:function(e,t){e.isModalOpened=t},addNewUser:function(e,t){e.users.push(t)}},actions:{getUsersFromStorage:function(e){var t=JSON.parse(window.localStorage.getItem("users"))||[];e.commit("updateUsers",t)},setUsersToStorage:function(e,t){window.localStorage.setItem("users",t)}}});r.Z.config.productionTip=!1,new r.Z({store:U,render:function(e){return e(w)}}).$mount("#app")}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,r,n,o){if(!r){var i=1/0;for(c=0;c<e.length;c++){r=e[c][0],n=e[c][1],o=e[c][2];for(var a=!0,u=0;u<r.length;u++)(!1&o||i>=o)&&Object.keys(s.O).every((function(e){return s.O[e](r[u])}))?r.splice(u--,1):(a=!1,o<i&&(i=o));if(a){e.splice(c--,1);var l=n();void 0!==l&&(t=l)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,n,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,o,i=r[0],a=r[1],u=r[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(n in a)s.o(a,n)&&(s.m[n]=a[n]);if(u)var c=u(s)}for(t&&t(r);l<i.length;l++)o=i[l],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(c)},r=self["webpackChunkvue_test_roistat"]=self["webpackChunkvue_test_roistat"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(4931)}));r=s.O(r)})();
//# sourceMappingURL=app-legacy.9f5d4e76.js.map